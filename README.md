# MEAM5100-T12-Repo
god bless you

========================================================
                        开发日志
========================================================
11.9
1. test.ino-测试两个电机给定速度转动以及encoder速度返回值正常，power supply给了9V，注意公对母杜邦线松动脱落问题
2. 11.9PID。ino-电源保持9V，测试起来设定大概80-90的target counts目前波形比较健康，当然也可以把速度往上调试试，目前看到如果速度太低电机会有一顿一顿的问题，感觉是在克服静摩擦力之类的？
PS：encoder接的时候注意引脚1要接限流电阻330ohms

引脚图
==================================================
 POWER WIRING
==================================================
- M5Stamp [GND]  ---> L298N [GND]
- M5Stamp [GND]  ---> Power Supply [GND] (-)
- L298N   [GND]  ---> Power Supply [GND] (-)
- L298N   [+12V] ---> Power Supply [9V] (+)

==================================================
 LEFT MOTOR (A-Channel / G1)
==================================================
- M5Stamp [G1]   ---> Left Encoder [Signal]
- M5Stamp [G18]  ---> L298N [ENA] (PWM Speed)
- M5Stamp [G19]  ---> L298N [IN1] (Direction)
- M5Stamp [G20]  ---> L298N [IN2] (Direction)
- L298N   [OUT1] ---> Left Motor
- L298N   [OUT2] ---> Left Motor

==================================================
 RIGHT MOTOR (B-Channel / G0)
==================================================
- M5Stamp [G0]   ---> Right Encoder [Signal]
- M5Stamp [G7]   ---> L298N [ENB] (PWM Speed)
- M5Stamp [G4]   ---> L298N [IN3] (Direction)
- M5Stamp [G5]   ---> L298N [IN4] (Direction)
- L298N   [OUT3] ---> Right Motor
- L298N   [OUT4] ---> Right Motor

==================================================
Kp = 3 Ki = 0 Kd = 0.1

==================================================
11.9夜间更新（代码大更新，新代码在cjy_demo）
==================================================
1.把GPIO20换成了6（经测试，GPIO10也不管用）。解决了backward模式左轮不转bug。
2.取消使用interrupt逻辑，改为GPT写的简单逻辑（应该是轮询逻辑），解决了在6V电压下转动异常等bug。现在使用6V供电正常。
3.在新的代码中加入了转向操作。不过在网页设计中，turn left/right逻辑错误（gpt是按照后驱车来写的，而我们是前驱车），通过强行将网页上的Right/Left按钮互换修复了这一bug
4.H桥的out1/4接电机的红线。一定注意！！否则车轮转向错误
5.面包板不再使用esp32的5v供电，改为3.3V供电。（这个改动有待考究，因为是记得Mark说arduino逻辑电平用3.3V。不过谁知道呢....反正目前能跑）
6.先设定速度，再选择forward/backward电机不动。必须要先点击forward/backward，再选择速度电机才转的bug未修复。（不过这个无所谓...修不修都行，能跑就行...）
